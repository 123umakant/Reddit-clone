<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>Reddit- the front page of internet</title>
    <link rel="stylesheet" href="../static/css/indexstyle.css" th:href="@{/css/indexstyle.css}">
</head>
<body>
<div id="navbar">

    <img id="redditlogo" src="https://redditmedia.s3.ap-south-1.amazonaws.com/NicePng_reddit-png_2342271.png"
         alt="reddit logo">
    <form th:action="@{#}" href="#">
        <input style="height : 40px; font-size : 20px; width : 800px" type="text">
        <button class="btn btn-default" style="height : 40px; font-size : 20px" type="submit">Search</button>
    </form>
    <div th:unless="${#authorization.expression('isAuthenticated()')}">
        <button th:onclick="window.location='/login'" style="height : 40px; font-size : 20px" class="btn btn-default">
            Login
        </button>
        <button th:onclick="window.location='/register'" style="height : 40px; font-size : 20px"
                class="btn btn-default">Signup
        </button>
    </div>

    <span id="profile" sec:authorize="isAuthenticated()">
                  <a sec:authentication="name">YOU</a>
                  <ul>
                     <li><a th:href="@{/profile}">Profile</a></li>
                     <li><a th:href="@{/logout}">Logout</a></li>
                 </ul>
            </span>

</div>

<div id="trending">
    <span style="font-size : 12px; margin-left : 15px; font-weight : bold">Trending today</span>
    <div>
        <section>
            <img style="height : 200px; width : 230px; border-radius : 20px;"
                 src="https://www.hindustantimes.com/rf/image_size_960x540/HT/p2/2020/05/21/Pictures/_037138a2-9b47-11ea-a010-c71373fc244b.jpg"
                 alt="nothing">
        </section>
        <section>
            <img style="height : 200px; width : 230px; border-radius : 20px;"
                 src="https://www.hindustantimes.com/rf/image_size_960x540/HT/p2/2020/05/21/Pictures/_037138a2-9b47-11ea-a010-c71373fc244b.jpg"
                 alt="nothing">
        </section>
        <section>
            <img style="height : 200px; width : 230px; border-radius : 20px;"
                 src="https://www.hindustantimes.com/rf/image_size_960x540/HT/p2/2020/05/21/Pictures/_037138a2-9b47-11ea-a010-c71373fc244b.jpg"
                 alt="nothing">
        </section>
        <section>
            <img style="height : 200px; width : 230px; border-radius : 20px;"
                 src="https://www.hindustantimes.com/rf/image_size_960x540/HT/p2/2020/05/21/Pictures/_037138a2-9b47-11ea-a010-c71373fc244b.jpg"
                 alt="nothing">
        </section>
    </div>
</div>

<span style="font-size : 12px; margin-left : 15px; font-weight : bold; margin-left : 18% ">Popular posts</span>

<div id="post-subreddit">
    <div id="posts" style="width : 68%;">
        <section id="sort-posts">
            <button class="btn btn-default">Hot</button>
            <button class="btn btn-default">New</button>
            <button class="btn btn-default">Top</button>
            <button class="btn btn-default">Rising</button>
        </section>
        <br>
        <div class="subreddit-content" th:each=" post : ${posts}">
            <section id="textpost" th:if="${post.contentType == 'text'}">
                <div style="font-size:15px;">
                    <span th:text="${'r/'+post.subreddit.communityName}">Subreddit</span>
                    <span style="color:rgb(120, 124, 126);">Posted by u/<span th:text="${post.user}">user</span>
                         <span th:text="${post.createdAt}"></span></span>
                    <h3 th:text="${post.title}">title</h3>
                    <p th:text="${post.content}">content</p>
                </div>
            </section>
            <section id="mediapost" th:if="${post.contentType == 'image'}">
                <div style="font-size:15px;">
                    <span th:text="${'r/'+post.subreddit.communityName}">Subreddit</span>
                    <span style="color:rgb(120, 124, 126);">Posted by u/<span th:text="${post.user}">user</span>
                         <span th:text="${post.createdAt}"></span></span>
                <h3 style="font-size : 22px;" th:text="${post.title}">title</h3><br>
                </div>
                <img style="width: 600px; height : 480px;"
                     src="https://www.hindustantimes.com/rf/image_size_960x540/HT/p2/2020/05/21/Pictures/_037138a2-9b47-11ea-a010-c71373fc244b.jpg"
                     th:src="@{https://redditmedia.s3.ap-south-1.amazonaws.com/{file} (file = ${post.content})}"
                     th:alt="${post.content}">
            </section>
            <section id="mediapost" th:if="${post.contentType == 'video'}">
                <div style="font-size:15px;">
                    <span th:text="${'r/'+post.subreddit.communityName}">Subreddit</span>
                    <span style="color:rgb(120, 124, 126);">Posted by u/<span th:text="${post.user}">user</span>
                         <span th:text="${post.createdAt}"></span></span>
                    <h3 style="font-size : 22px;" th:text="${post.title}">title</h3><br>
                </div>
                <span style="font-size : 22px" th:text="${post.title}">title</span><br>
                <video controls style="width: 600px;">
                    <source
                            src="https://redditmedia.s3.ap-south-1.amazonaws.com/2020-09-03-153241.mp4"
                            th:src="@{https://redditmedia.s3.ap-south-1.amazonaws.com/{file} (file = ${post.content})}"
                            type="video/mp4">
                </video>
            </section>
            <section id="textpost" th:if="${post.contentType == 'link'}">
                <div style="font-size:15px;">
                    <span th:text="${'r/'+post.subreddit.communityName}">Subreddit</span>
                    <span style="color:rgb(120, 124, 126);">Posted by u/<span th:text="${post.user}">user</span>
                         <span th:text="${post.createdAt}"></span></span>
                    <h3 style="font-size : 22px;" th:text="${post.title}">title</h3><br>
                </div>
                <span style="font-size : 22px" th:text="${post.title}">title</span><br>
                <a th:href="@{${post.content}}"><span style="font-size : 18px" th:text="${post.content}"></span></a>
            </section>

            <button th:unless="${post.isVoted && post.isUpVote}" sec:authorize="isAuthenticated()"><a
                    th:href="@{/posts/{postid}/vote?upvote=true (postid = ${post.id})}">Up-vote</a></button>
            <button th:if="${post.isVoted && post.isUpVote}" sec:authorize="isAuthenticated()"><a
                    th:href="@{/posts/{postid}/unvote (postid = ${post.id})}">Up-voted</a></button>

            <!--  <span style="font-size : 14px" th:text="${post.upVoteCount} - ${post.downVoteCount} > 0 ? ${post.upVoteCount} - ${post.downVoteCount} : 0"></span>-->

            <button th:unless="${post.isVoted && post.isUpVote == false}" sec:authorize="isAuthenticated()"><a
                    th:href="@{/posts/{postid}/vote?upvote=false (postid = ${post.id})}">Down-vote</a></button>
            <button th:if="${post.isVoted && post.isUpVote == false}" sec:authorize="isAuthenticated()"><a
                    th:href="@{/posts/{postid}/unvote (postid = ${post.id})}">Down-voted</a></button>

        </div>


    </div>

</div>

<div id="subreddits">

</div>

</div>
</body>
</html>